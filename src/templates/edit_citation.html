{% extends "layout.html" %}

{% block title %}
Edit citation
{% endblock %}

{% block body %}

<h2>Edit citation</h2>

{% for message in get_flashed_messages() %}
<p>
  {{ message }}
</p>
{% endfor %}

<style>
.hidden { display: none; }
</style>

<div class="new_citation">
{% if citation.type == "book" %}
    <form action="/edit_book_citation/{{ citation.id }}" method="post" id="{{ citation.id }}" class="{% if citation.type == 'book' %}{% else %}hidden{% endif %}">
        <p>
          <label for="title">Title*</label>
          <input title="The title of the book" type="text" name="title" id="title" maxlength="75" value="{{ citation.title }}">
        </p>
        <p>
          <label for="author">Author(s)*</label>
          <input title="The author(s) of the book" type="text" name="author" id="author" maxlength="75" value="{{ citation.author }}">
        </p>
        <p>
          <label for="publisher">Publisher*</label>
          <input title="The publisher of the book" type="text" name="publisher" id="publisher" maxlength="50" value="{{ citation.publisher }}">
        </p>
        <p>
          <label for="isbn">ISBN*</label>
          <input title="The ISBN of the book" type="text" name="isbn" id="isbn" maxlength="20" value="{{ citation.isbn }}">
        </p>
        <p>
          <label for="year">Year*</label>
          <input title="The year of publication" type="number" name="year" id="year" min="0" max="2025" value="{{ citation.year }}">
        </p>
        <p>
          <label for="tags">Tags</label>
          <input title="Tags separated with a comma (optional)" type="text" name="tags" id="book_tags" value="{% for tag in citation.tags %}{{ tag }}{% if not loop.last %}, {% endif %}{% endfor %}">
        </p>
        <button type="submit" id="submit_button" >Edit</button>
    </form>


{%elif citation.type == "inproceedings"%}
    <form action="/edit_inproceedings_citation/{{citation.id}}" method="post" id="{{ citation.id }}" class="{% if citation.type == 'inproceedings' %}{% else %}hidden{% endif %}">
      <p>
        <label for="title">Paper*</label>
        <input title="The title of the paper" type="text" name="title" id="title" maxlength="75" value="{{ citation.title }}">
      </p>
      <p>
        <label for="author">Authors*</label>
        <input title="The author(s) of the paper" type="text" name="author" id="author" value="{{ citation.author }}">
      </p>
      <p>
        <label for="booktitle">Conference*</label>
        <input title="The title of the conference proceedings" type="text" name="booktitle" id="booktitle" maxlength="100" value="{{ citation.booktitle }}">
      </p>
      <p>
        <label for="year">Year*</label>
        <input title="The year the conference proceedings were published" type="number" name="year" id="year" min="0" max="2025" value="{{ citation.year }}">
      </p>
      <p>
        <label for="tags">Tags</label>
        <input title="Tags separated with a comma (optional)" type="text" name="tags" id="inprocceeding_tags" value="{% for tag in citation.tags %}{{ tag }}{% if not loop.last %}, {% endif %}{% endfor %}">
      </p>
      <button type="submit" id="submit_button" >Edit</button>
  </form>

{% elif citation.type == "article" %}
    <form action="/edit_article_citation/{{citation.id}}" method="post" id="{{ citation.id }}" class="{% if citation.type == 'article' %}{% else %}hidden{% endif %}">
      <p>
        <label for="title">Title*</label>
        <input title="The title of the article" type="text" name="title" id="title" maxlength="75" value="{{ citation.title }}">
      </p>
      <p>
        <label for="author">Authors*</label>
        <input title="The author(s) of the article" type="text" name="author" id="author" value="{{ citation.author }}">
      </p>
      <p>
        <label for="journal">Journal*</label>
        <input title="The name of the journal, magazine, or newspaper in which the article was published" type="text" name="journal" id="journal" value="{{ citation.journal }}">
      </p>
      <p>
        <label for="year">Year*</label>
        <input title="The year of publication" type="number" name="year" id="year" min="0" max="2025" value="{{ citation.year }}">
      </p>
      <p>
        <label for="tags">Tags</label>
        <input title="Tags separated with a comma (optional)" type="text" name="tags" id="article_tags" value="{% for tag in citation.tags %}{{ tag }}{% if not loop.last %}, {% endif %}{% endfor %}">
      </p>
      <button type="submit" id="submit_button" >Edit</button>
  </form>
</div>
{% endif %}

{% endblock %}